<!-- templates/student/courses.html -->
 <!-- templates/student/courses.html -->
{% extends 'student/base_student.html' %}
{% load static %}

{% block title %}Mes Cours - Online School{% endblock %}

{% block student_content %}
<!-- Hero section -->
<section class="hero-section">
    <div class="container">
        <h1>Mes cours</h1>
        <p>Consultez tous vos cours et suivez votre progression</p>
    </div>
</section>

<!-- Main content -->
<main class="container">
    <!-- Filters -->
    <section class="filters-section mb-4">
        <div class="card">
            <div class="card-body">
                <div class="row">
                    <div class="col-md-3">
                        <div class="form-group">
                            <label for="semesterFilter">Semestre</label>
                            <select class="form-control" id="semesterFilter">
                                <option value="">Tous les semestres</option>
                                <option value="1">Semestre 1 - 2022/2023</option>
                                <option value="2">Semestre 2 - 2022/2023</option>
                            </select>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="form-group">
                            <label for="categoryFilter">Catégorie</label>
                            <select class="form-control" id="categoryFilter">
                                <option value="">Toutes les catégories</option>
                                <option value="programming">Programmation</option>
                                <option value="database">Bases de données</option>
                                <option value="webdev">Développement Web</option>
                                <option value="networking">Réseaux</option>
                                <option value="ai">Intelligence Artificielle</option>
                            </select>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="form-group">
                            <label for="progressFilter">Progression</label>
                            <select class="form-control" id="progressFilter">
                                <option value="">Tous</option>
                                <option value="inprogress">En cours</option>
                                <option value="completed">Terminés</option>
                                <option value="notstarted">Non commencés</option>
                            </select>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="form-group">
                            <label for="searchFilter">Recherche</label>
                            <input type="text" class="form-control" id="searchFilter" placeholder="Titre ou mot-clé">
                        </div>
                    </div>
                </div>
                <div class="row mt-2">
                    <div class="col-12 text-right">
                        <button id="resetFilters" class="btn btn-secondary mr-2">
                            <i class="fas fa-undo"></i> Réinitialiser
                        </button>
                        <button id="applyFilters" class="btn btn-primary">
                            <i class="fas fa-filter"></i> Appliquer
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Current courses -->
    <section class="current-courses mb-5">
        <h2>Cours en cours</h2>
        <div class="course-grid">
            <!-- Course 1 -->
            <div class="course-card">
                <div class="course-image" style="background-image: url({% static 'images/course-programming.jpg' %});"></div>
                <div class="course-content">
                    <h3 class="course-title">Introduction à la programmation</h3>
                    <p class="course-description">Apprendre les bases de la programmation avec Python.</p>
                    <div class="course-meta">
                        <span><i class="fas fa-user"></i> Bernard Dupont</span>
                        <span><i class="fas fa-clock"></i> 10h restantes</span>
                    </div>
                    <div class="course-progress">
                        <div class="progress-text">
                            <span>Progression: 75%</span>
                        </div>
                        <div class="progress">
                            <div class="progress-bar" style="width: 75%;"></div>
                        </div>
                    </div>
                    <a href="{% url 'etudiant:student_course_detail' course_id=1 %}" class="btn btn-primary btn-block mt-3">
                        Continuer
                    </a>
                </div>
            </div>
            
            <!-- Course 2 -->
            <div class="course-card">
                <div class="course-image" style="background-image: url({% static 'images/course-database.jpg' %});"></div>
                <div class="course-content">
                    <h3 class="course-title">Bases de données</h3>
                    <p class="course-description">Conception et utilisation des bases de données relationnelles.</p>
                    <div class="course-meta">
                        <span><i class="fas fa-user"></i> Claire Martin</span>
                        <span><i class="fas fa-clock"></i> 15h restantes</span>
                    </div>
                    <div class="course-progress">
                        <div class="progress-text">
                            <span>Progression: 50%</span>
                        </div>
                        <div class="progress">
                            <div class="progress-bar" style="width: 50%;"></div>
                        </div>
                    </div>
                    <a href="{% url 'etudiant:student_course_detail' course_id=2 %}" class="btn btn-primary btn-block mt-3">
                        Continuer
                    </a>
                </div>
            </div>
            
            <!-- Course 3 -->
            <div class="course-card">
                <div class="course-image" style="background-image: url({% static 'images/course-webdev.jpg' %});"></div>
                <div class="course-content">
                    <h3 class="course-title">Développement Web</h3>
                    <p class="course-description">Apprenez HTML, CSS et JavaScript pour créer des sites modernes.</p>
                    <div class="course-meta">
                        <span><i class="fas fa-user"></i> Thomas Leroy</span>
                        <span><i class="fas fa-clock"></i> 20h restantes</span>
                    </div>
                    <div class="course-progress">
                        <div class="progress-text">
                            <span>Progression: 30%</span>
                        </div>
                        <div class="progress">
                            <div class="progress-bar" style="width: 30%;"></div>
                        </div>
                    </div>
                    <a href="{% url 'etudiant:student_course_detail' course_id=3 %}" class="btn btn-primary btn-block mt-3">
                        Continuer
                    </a>
                </div>
            </div>
        </div>
    </section>

    <!-- Upcoming courses -->
    <section class="upcoming-courses mb-5">
        <h2>Cours à venir</h2>
        <div class="course-grid">
            <!-- Course 4 -->
            <div class="course-card">
                <div class="course-image" style="background-image: url({% static 'images/course-ai.jpg' %});"></div>
                <div class="course-content">
                    <div class="course-badge">
                        <span class="badge badge-info">Débute le 03/04/2023</span>
                    </div>
                    <h3 class="course-title">Intelligence Artificielle</h3>
                    <p class="course-description">Introduction aux concepts et algorithmes d'intelligence artificielle.</p>
                    <div class="course-meta">
                        <span><i class="fas fa-user"></i> Philippe Moreau</span>
                        <span><i class="fas fa-clock"></i> 40h estimées</span>
                    </div>
                    <a href="#" class="btn btn-outline-secondary btn-block mt-3 disabled">
                        Non disponible
                    </a>
                </div>
            </div>

            <!-- Course 5 -->
            <div class="course-card">
                <div class="course-image" style="background-image: url({% static 'images/course-security.jpg' %});"></div>
                <div class="course-content">
                    <div class="course-badge">
                        <span class="badge badge-info">Débute le 05/04/2023</span>
                    </div>
                    <h3 class="course-title">Sécurité informatique</h3>
                    <p class="course-description">Protégez vos applications et données contre les attaques.</p>
                    <div class="course-meta">
                        <span><i class="fas fa-user"></i> Sophie Bernard</span>
                        <span><i class="fas fa-clock"></i> 35h estimées</span>
                    </div>
                    <a href="#" class="btn btn-outline-secondary btn-block mt-3 disabled">
                        Non disponible
                    </a>
                </div>
            </div>
        </div>
    </section>

    <!-- Completed courses -->
    <section class="completed-courses mb-5">
        <h2>Cours terminés</h2>
        <div class="course-grid">
            <!-- Course 6 -->
            <div class="course-card">
                <div class="course-image" style="background-image: url({% static 'images/course-algorithms.jpg' %});"></div>
                <div class="course-content">
                    <div class="course-badge">
                        <span class="badge badge-success">Terminé</span>
                    </div>
                    <h3 class="course-title">Algorithmes fondamentaux</h3>
                    <p class="course-description">Étude des algorithmes essentiels et de leur complexité.</p>
                    <div class="course-meta">
                        <span><i class="fas fa-user"></i> Marc Dubois</span>
                        <span><i class="fas fa-award"></i> Note finale: 17/20</span>
                    </div>
                    <div class="course-progress">
                        <div class="progress-text">
                            <span>Progression: 100%</span>
                        </div>
                        <div class="progress">
                            <div class="progress-bar bg-success" style="width: 100%;"></div>
                        </div>
                    </div>
                    <a href="{% url 'etudiant:student_course_detail' course_id=4 %}" class="btn btn-success btn-block mt-3">
                        Revoir le cours
                    </a>
                </div>
            </div>

            <!-- Course 7 -->
            <div class="course-card">
                <div class="course-image" style="background-image: url({% static 'images/course-networks.jpg' %});"></div>
                <div class="course-content">
                    <div class="course-badge">
                        <span class="badge badge-success">Terminé</span>
                    </div>
                    <h3 class="course-title">Introduction aux réseaux</h3>
                    <p class="course-description">Comprendre les concepts de base des réseaux informatiques.</p>
                    <div class="course-meta">
                        <span><i class="fas fa-user"></i> Pierre Lambert</span>
                        <span><i class="fas fa-award"></i> Note finale: 15/20</span>
                    </div>
                    <div class="course-progress">
                        <div class="progress-text">
                            <span>Progression: 100%</span>
                        </div>
                        <div class="progress">
                            <div class="progress-bar bg-success" style="width: 100%;"></div>
                        </div>
                    </div>
                    <a href="{% url 'etudiant:student_course_detail' course_id=5 %}" class="btn btn-success btn-block mt-3">
                        Revoir le cours
                    </a>
                </div>
            </div>
        </div>
    </section>
</main>
{% endblock %}

{% block extra_js %}
{{ block.super }}
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Gestion des filtres
        const resetFiltersBtn = document.getElementById('resetFilters');
        const applyFiltersBtn = document.getElementById('applyFilters');
        
        if (resetFiltersBtn) {
            resetFiltersBtn.addEventListener('click', function() {
                document.getElementById('semesterFilter').value = '';
                document.getElementById('categoryFilter').value = '';
                document.getElementById('progressFilter').value = '';
                document.getElementById('searchFilter').value = '';
            });
        }
        
        if (applyFiltersBtn) {
            applyFiltersBtn.addEventListener('click', function() {
                // Récupérer les valeurs des filtres
                const semester = document.getElementById('semesterFilter').value;
                const category = document.getElementById('categoryFilter').value;
                const progress = document.getElementById('progressFilter').value;
                const search = document.getElementById('searchFilter').value;
                
                // Construire la requête (simulation pour l'exemple)
                const query = {
                    semester: semester,
                    category: category,
                    progress: progress,
                    search: search
                };
                
                console.log('Applying filters:', query);
                
                // Simuler un chargement
                this.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Chargement...';
                
                // Réinitialiser après un court délai (à remplacer par un appel API réel)
                setTimeout(() => {
                    this.innerHTML = '<i class="fas fa-filter"></i> Appliquer';
                    
                    // Simuler une notification de filtrage réussi
                    showNotification('Filtres appliqués avec succès !', 'success');
                }, 800);
            });
        }
        
        // Animation des cartes de cours
        const courseCards = document.querySelectorAll('.course-card');
        
        courseCards.forEach(card => {
            card.addEventListener('mouseenter', function() {
                this.style.transform = 'translateY(-8px)';
                this.style.boxShadow = '0 10px 20px rgba(0, 0, 0, 0.2)';
            });
            
            card.addEventListener('mouseleave', function() {
                this.style.transform = 'translateY(0)';
                this.style.boxShadow = '0 4px 6px rgba(0, 0, 0, 0.1)';
            });
        });
        
        // Fonction pour afficher des notifications
        function showNotification(message, type = 'info') {
            // Créer l'élément de notification
            const notification = document.createElement('div');
            notification.className = `notification notification-${type}`;
            notification.innerHTML = `
                <div class="notification-icon">
                    <i class="fas ${type === 'info' ? 'fa-info-circle' : 
                                   type === 'success' ? 'fa-check-circle' : 
                                   type === 'warning' ? 'fa-exclamation-triangle' : 
                                   'fa-times-circle'}"></i>
                </div>
                <div class="notification-content">
                    <p>${message}</p>
                </div>
                <button class="close">
                    <i class="fas fa-times"></i>
                </button>
            `;
            
            // Créer ou récupérer le conteneur de notifications
            let notificationsContainer = document.querySelector('.notifications-container');
            
            if (!notificationsContainer) {
                notificationsContainer = document.createElement('div');
                notificationsContainer.className = 'notifications-container';
                document.body.appendChild(notificationsContainer);
            }
            
            // Ajouter la notification
            notificationsContainer.appendChild(notification);
            
            // Gestion du bouton de fermeture
            notification.querySelector('.close').addEventListener('click', function() {
                notification.classList.add('fade-out');
                setTimeout(() => {
                    notification.remove();
                    
                    // Nettoyer le conteneur s'il est vide
                    if (notificationsContainer.children.length === 0) {
                        notificationsContainer.remove();
                    }
                }, 300);
            });
            
            // Fermeture automatique après 3 secondes
            setTimeout(() => {
                if (document.body.contains(notification)) {
                    notification.classList.add('fade-out');
                    setTimeout(() => {
                        notification.remove();
                        
                        // Nettoyer le conteneur s'il est vide
                        if (notificationsContainer.children.length === 0) {
                            notificationsContainer.remove();
                        }
                    }, 300);
                }
            }, 3000);
        }
    });
</script>
{% endblock %}