<!-- templates/student/forum.html -->
 <!-- templates/student/forum.html -->
{% extends 'student/base_student.html' %}
{% load static %}

{% block title %}Forum - Online School{% endblock %}

{% block student_content %}
<!-- Hero section -->
<section class="hero-section">
    <div class="container">
        <h1>Forum</h1>
        <p>Échangez avec vos enseignants et camarades</p>
    </div>
</section>

<!-- Main content -->
<main class="container">
    <!-- Onglets du forum -->
    <div class="forum-tabs mb-4">
        <ul class="nav nav-tabs" id="forumTabs" role="tablist">
            <li class="nav-item" role="presentation">
                <a class="nav-link active" id="general-tab" data-toggle="tab" href="#general" role="tab">
                    Forums généraux
                </a>
            </li>
            <li class="nav-item" role="presentation">
                <a class="nav-link" id="courses-tab" data-toggle="tab" href="#courses" role="tab">
                    Forums de cours
                </a>
            </li>
            <li class="nav-item" role="presentation">
                <a class="nav-link" id="recent-tab" data-toggle="tab" href="#recent" role="tab">
                    Messages récents
                </a>
            </li>
            <li class="nav-item" role="presentation">
                <a class="nav-link" id="popular-tab" data-toggle="tab" href="#popular" role="tab">
                    Sujets populaires
                </a>
            </li>
        </ul>
    </div>
    
    <!-- Contenu des onglets -->
    <div class="tab-content" id="forumTabsContent">
        <!-- Forums généraux -->
        <div class="tab-pane fade show active" id="general" role="tabpanel">
            <div class="forum-header">
                <h2>Forums généraux</h2>
                <div class="forum-actions">
                    <div class="search-container">
                        <input type="text" class="form-control" placeholder="Rechercher dans les forums...">
                        <button class="btn btn-primary">
                            <i class="fas fa-search"></i>
                        </button>
                    </div>
                </div>
            </div>
            
            <div class="forum-category-container">
                <!-- Annonces -->
                <div class="forum-category">
                    <div class="forum-category-header">
                        <h3>Annonces</h3>
                    </div>
                    <div class="forum-list">
                        <div class="forum-item">
                            <div class="forum-icon">
                                <i class="fas fa-bullhorn"></i>
                            </div>
                            <div class="forum-info">
                                <h4>Annonces officielles</h4>
                                <p>Annonces importantes de l'administration</p>
                            </div>
                            <div class="forum-stats">
                                <div class="stat">
                                    <span class="stat-value">12</span>
                                    <span class="stat-label">Sujets</span>
                                </div>
                                <div class="stat">
                                    <span class="stat-value">48</span>
                                    <span class="stat-label">Messages</span>
                                </div>
                            </div>
                            <div class="forum-last-post">
                                <div class="last-post-info">
                                    <p>
                                        <a href="#">Modification des horaires d'examens</a><br>
                                        par <a href="#">Admin</a>
                                    </p>
                                    <p>16 Mars 2023, 14:25</p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="forum-item">
                            <div class="forum-icon">
                                <i class="fas fa-calendar-alt"></i>
                            </div>
                            <div class="forum-info">
                                <h4>Événements et activités</h4>
                                <p>Informations sur les événements à venir</p>
                            </div>
                            <div class="forum-stats">
                                <div class="stat">
                                    <span class="stat-value">8</span>
                                    <span class="stat-label">Sujets</span>
                                </div>
                                <div class="stat">
                                    <span class="stat-value">32</span>
                                    <span class="stat-label">Messages</span>
                                </div>
                            </div>
                            <div class="forum-last-post">
                                <div class="last-post-info">
                                    <p>
                                        <a href="#">Hackathon de printemps</a><br>
                                        par <a href="#">Sophie Martin</a>
                                    </p>
                                    <p>15 Mars 2023, 09:15</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Entraide -->
                <div class="forum-category">
                    <div class="forum-category-header">
                        <h3>Entraide étudiante</h3>
                    </div>
                    <div class="forum-list">
                        <div class="forum-item">
                            <div class="forum-icon">
                                <i class="fas fa-question-circle"></i>
                            </div>
                            <div class="forum-info">
                                <h4>Questions générales</h4>
                                <p>Posez vos questions sur la vie étudiante</p>
                            </div>
                            <div class="forum-stats">
                                <div class="stat">
                                    <span class="stat-value">25</span>
                                    <span class="stat-label">Sujets</span>
                                </div>
                                <div class="stat">
                                    <span class="stat-value">128</span>
                                    <span class="stat-label">Messages</span>
                                </div>
                            </div>
                            <div class="forum-last-post">
                                <div class="last-post-info">
                                    <p>
                                        <a href="#">Logement étudiant</a><br>
                                        par <a href="#">Thomas Petit</a>
                                    </p>
                                    <p>17 Mars 2023, 11:42</p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="forum-item">
                            <div class="forum-icon">
                                <i class="fas fa-hands-helping"></i>
                            </div>
                            <div class="forum-info">
                                <h4>Ressources et partage</h4>
                                <p>Partagez des ressources utiles avec vos camarades</p>
                            </div>
                            <div class="forum-stats">
                                <div class="stat">
                                    <span class="stat-value">18</span>
                                    <span class="stat-label">Sujets</span>
                                </div>
                                <div class="stat">
                                    <span class="stat-value">87</span>
                                    <span class="stat-label">Messages</span>
                                </div>
                            </div>
                            <div class="forum-last-post">
                                <div class="last-post-info">
                                    <p>
                                        <a href="#">Ressources gratuites pour apprendre JavaScript</a><br>
                                        par <a href="#">Léa Dubois</a>
                                    </p>
                                    <p>14 Mars 2023, 16:30</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Divers -->
                <div class="forum-category">
                    <div class="forum-category-header">
                        <h3>Divers</h3>
                    </div>
                    <div class="forum-list">
                        <div class="forum-item">
                            <div class="forum-icon">
                                <i class="fas fa-coffee"></i>
                            </div>
                            <div class="forum-info">
                                <h4>Café virtuel</h4>
                                <p>Discussions informelles et détente</p>
                            </div>
                            <div class="forum-stats">
                                <div class="stat">
                                    <span class="stat-value">42</span>
                                    <span class="stat-label">Sujets</span>
                                </div>
                                <div class="stat">
                                    <span class="stat-value">256</span>
                                    <span class="stat-label">Messages</span>
                                </div>
                            </div>
                            <div class="forum-last-post">
                                <div class="last-post-info">
                                    <p>
                                        <a href="#">Meilleurs films/séries tech à voir</a><br>
                                        par <a href="#">Nicolas Martin</a>
                                    </p>
                                    <p>17 Mars 2023, 18:05</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Forums de cours -->
        <div class="tab-pane fade" id="courses" role="tabpanel">
            <div class="forum-header">
                <h2>Forums de cours</h2>
                <div class="forum-actions">
                    <div class="search-container">
                        <input type="text" class="form-control" placeholder="Rechercher dans les forums...">
                        <button class="btn btn-primary">
                            <i class="fas fa-search"></i>
                        </button>
                    </div>
                </div>
            </div>
            
            <div class="forum-category-container">
                <!-- Cours 1 -->
                <div class="forum-category">
                    <div class="forum-category-header">
                        <h3>Introduction à la programmation</h3>
                    </div>
                    <div class="forum-list">
                        <div class="forum-item">
                            <div class="forum-icon">
                                <i class="fas fa-book"></i>
                            </div>
                            <div class="forum-info">
                                <h4>Forum général du cours</h4>
                                <p>Discussions sur le contenu et les activités du cours</p>
                            </div>
                            <div class="forum-stats">
                                <div class="stat">
                                    <span class="stat-value">28</span>
                                    <span class="stat-label">Sujets</span>
                                </div>
                                <div class="stat">
                                    <span class="stat-value">145</span>
                                    <span class="stat-label">Messages</span>
                                </div>
                            </div>
                            <div class="forum-last-post">
                                <div class="last-post-info">
                                    <p>
                                        <a href="#">Problème avec les list comprehensions</a><br>
                                        par <a href="#">Paul Dupuis</a>
                                    </p>
                                    <p>17 Mars 2023, 15:30</p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="forum-item">
                            <div class="forum-icon">
                                <i class="fas fa-code"></i>
                            </div>
                            <div class="forum-info">
                                <h4>Aide aux exercices</h4>
                                <p>Entraide pour les exercices et projets</p>
                            </div>
                            <div class="forum-stats">
                                <div class="stat">
                                    <span class="stat-value">15</span>
                                    <span class="stat-label">Sujets</span>
                                </div>
                                <div class="stat">
                                    <span class="stat-value">87</span>
                                    <span class="stat-label">Messages</span>
                                </div>
                            </div>
                            <div class="forum-last-post">
                                <div class="last-post-info">
                                    <p>
                                        <a href="#">Exercice sur les boucles while</a><br>
                                        par <a href="#">Bernard Dupont</a>
                                    </p>
                                    <p>16 Mars 2023, 11:15</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Cours 2 -->
                <div class="forum-category">
                    <div class="forum-category-header">
                        <h3>Bases de données</h3>
                    </div>
                    <div class="forum-list">
                        <div class="forum-item">
                            <div class="forum-icon">
                                <i class="fas fa-book"></i>
                            </div>
                            <div class="forum-info">
                                <h4>Forum général du cours</h4>
                                <p>Discussions sur le contenu et les activités du cours</p>
                            </div>
                            <div class="forum-stats">
                                <div class="stat">
                                    <span class="stat-value">18</span>
                                    <span class="stat-label">Sujets</span>
                                </div>
                                <div class="stat">
                                    <span class="stat-value">76</span>
                                    <span class="stat-label">Messages</span>
                                </div>
                            </div>
                            <div class="forum-last-post">
                                <div class="last-post-info">
                                    <p>
                                        <a href="#">Différence entre LEFT JOIN et RIGHT JOIN</a><br>
                                        par <a href="#">Claire Martin</a>
                                    </p>
                                    <p>15 Mars 2023, 14:25</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Cours 3 -->
                <div class="forum-category">
                    <div class="forum-category-header">
                        <h3>Développement Web</h3>
                    </div>
                    <div class="forum-list">
                        <div class="forum-item">
                            <div class="forum-icon">
                                <i class="fas fa-book"></i>
                            </div>
                            <div class="forum-info">
                                <h4>Forum général du cours</h4>
                                <p>Discussions sur le contenu et les activités du cours</p>
                            </div>
                            <div class="forum-stats">
                                <div class="stat">
                                    <span class="stat-value">22</span>
                                    <span class="stat-label">Sujets</span>
                                </div>
                                <div class="stat">
                                    <span class="stat-value">98</span>
                                    <span class="stat-label">Messages</span>
                                </div>
                            </div>
                            <div class="forum-last-post">
                                <div class="last-post-info">
                                    <p>
                                        <a href="#">Problème avec Flexbox</a><br>
                                        par <a href="#">Emma Richard</a>
                                    </p>
                                    <p>16 Mars 2023, 09:45</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Messages récents -->
        <div class="tab-pane fade" id="recent" role="tabpanel">
            <div class="forum-header">
                <h2>Messages récents</h2>
            </div>
            
            <div class="recent-messages">
                <div class="message-list">
                    <!-- Message 1 -->
                    <div class="message-item">
                        <div class="message-avatar">
                            <img src="{% static 'images/avatars/student1.jpg' %}" alt="Avatar">
                        </div>
                        <div class="message-content">
                            <div class="message-header">
                                <span class="message-title">Problème avec les list comprehensions</span>
                                <span class="message-meta">Introduction à la programmation • Forum général</span>
                            </div>
                            <div class="message-preview">
                                <p>Bonjour, j'ai du mal à comprendre la syntaxe des list comprehensions quand on utilise plusieurs conditions...</p>
                            </div>
                            <div class="message-footer">
                                <span>par <a href="#">Paul Dupuis</a>, 17 Mars 2023, 15:30</span>
                                <span>12 réponses</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Message 2 -->
                    <div class="message-item">
                        <div class="message-avatar">
                            <img src="{% static 'images/avatars/teacher1.jpg' %}" alt="Avatar">
                        </div>
                        <div class="message-content">
                            <div class="message-header">
                                <span class="message-title">Re: Différence entre LEFT JOIN et RIGHT JOIN</span>
                                <span class="message-meta">Bases de données • Forum général</span>
                            </div>
                            <div class="message-preview">
                                <p>La principale différence est que LEFT JOIN garde toutes les lignes de la table de gauche, même s'il n'y a pas de correspondance...</p>
                            </div>
                            <div class="message-footer">
                                <span>par <a href="#">Claire Martin</a>, 15 Mars 2023, 14:25</span>
                                <span>Réponse à <a href="#">Marie Lefevre</a></span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Message 3 -->
                    <div class="message-item">
                        <div class="message-avatar">
                            <img src="{% static 'images/avatars/student2.jpg' %}" alt="Avatar">
                        </div>
                        <div class="message-content">
                            <div class="message-header">
                                <span class="message-title">Logement étudiant</span>
                                <span class="message-meta">Questions générales • Entraide étudiante</span>
                            </div>
                            <div class="message-preview">
                                <p>Est-ce que quelqu'un connaît une bonne résidence étudiante près du campus ? Je cherche quelque chose pour la rentrée prochaine...</p>
                            </div>
                            <div class="message-footer">
                                <span>par <a href="#">Thomas Petit</a>, 17 Mars 2023, 11:42</span>
                                <span>5 réponses</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Sujets populaires -->
        <div class="tab-pane fade" id="popular" role="tabpanel">
            <div class="forum-header">
                <h2>Sujets populaires</h2>
            </div>
            
            <div class="popular-topics">
                <div class="topic-list">
                    <!-- Sujet 1 -->
                    <div class="topic-item">
                        <div class="topic-votes">
                            <span class="vote-count">28</span>
                            <span class="vote-label">Votes</span>
                        </div>
                        <div class="topic-content">
                            <h4><a href="#">Ressources gratuites pour apprendre JavaScript</a></h4>
                            <div class="topic-meta">
                                <span><i class="fas fa-user"></i> Léa Dubois</span>
                                <span><i class="fas fa-comments"></i> 18 réponses</span>
                                <span><i class="fas fa-eye"></i> 245 vues</span>
                            </div>
                            <div class="topic-tags">
                                <span class="tag">JavaScript</span>
                                <span class="tag">Ressources</span>
                                <span class="tag">Apprentissage</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Sujet 2 -->
                    <div class="topic-item">
                        <div class="topic-votes">
                            <span class="vote-count">24</span>
                            <span class="vote-label">Votes</span>
                        </div>
                        <div class="topic-content">
                            <h4><a href="#">Meilleurs outils pour un développeur débutant</a></h4>
                            <div class="topic-meta">
                                <span><i class="fas fa-user"></i> Marc Dubois</span>
                                <span><i class="fas fa-comments"></i> 22 réponses</span>
                                <span><i class="fas fa-eye"></i> 312 vues</span>
                            </div>
                            <div class="topic-tags">
                                <span class="tag">Outils</span>
                                <span class="tag">Débutant</span>
                                <span class="tag">IDE</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Sujet 3 -->
                    <div class="topic-item">
                        <div class="topic-votes">
                            <span class="vote-count">19</span>
                            <span class="vote-label">Votes</span>
                        </div>
                        <div class="topic-content">
                            <h4><a href="#">Comment organiser son temps pour les projets de groupe ?</a></h4>
                            <div class="topic-meta">
                                <span><i class="fas fa-user"></i> Sophie Martin</span>
                                <span><i class="fas fa-comments"></i> 15 réponses</span>
                                <span><i class="fas fa-eye"></i> 198 vues</span>
                            </div>
                            <div class="topic-tags">
                                <span class="tag">Gestion de projet</span>
                                <span class="tag">Travail en équipe</span>
                                <span class="tag">Organisation</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Créer un nouveau sujet -->
    <div class="card mt-4">
        <div class="card-header">
            <h3>Créer un nouveau sujet</h3>
        </div>
        <div class="card-body">
            <form id="newTopicForm">
                <div class="form-group">
                    <label for="topicTitle">Titre du sujet</label>
                    <input type="text" class="form-control" id="topicTitle" placeholder="Titre clair et concis">
                </div>
                <div class="form-group">
                    <label for="topicCategory">Catégorie</label>
                    <select class="form-control" id="topicCategory">
                        <option value="">Sélectionnez une catégorie</option>
                        <optgroup label="Forums généraux">
                            <option value="general-questions">Questions générales</option>
                            <option value="resources">Ressources et partage</option>
                            <option value="cafe">Café virtuel</option>
                        </optgroup>
                        <optgroup label="Forums de cours">
                            <option value="programming">Introduction à la programmation</option>
                            <option value="database">Bases de données</option>
                            <option value="webdev">Développement Web</option>
                        </optgroup>
                    </select>
                </div>
                <div class="form-group">
                    <label for="topicMessage">Message</label>
                    <textarea class="form-control rich-editor" id="topicMessage" rows="6" placeholder="Détaillez votre question ou sujet de discussion..."></textarea>
                </div>
                <div class="form-group">
                    <label for="topicTags">Tags (séparés par des virgules)</label>
                    <input type="text" class="form-control" id="topicTags" placeholder="ex: python, exercice, aide">
                </div>
                <div class="form-group">
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="notifyReplies">
                        <label class="form-check-label" for="notifyReplies">
                            M'avertir des réponses par email
                        </label>
                    </div>
                </div>
                <button type="submit" class="btn btn-primary">Créer le sujet</button>
            </form>
        </div>
    </div>
</main>
{% endblock %}

{% block extra_js %}
{{ block.super }}
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Gestion des onglets du forum
        const tabLinks = document.querySelectorAll('#forumTabs a');
        
        tabLinks.forEach(link => {
            link.addEventListener('click', function(e) {
                e.preventDefault();
                
                // Masquer tous les panneaux
                document.querySelectorAll('.tab-pane').forEach(pane => {
                    pane.classList.remove('show', 'active');
                });
                
                // Désactiver tous les onglets
                tabLinks.forEach(tab => {
                    tab.classList.remove('active');
                });
                
                // Activer l'onglet cliqué
                this.classList.add('active');
                
                // Afficher le panneau correspondant
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.classList.add('show', 'active');
                }
            });
        });
        
        // Gestion de la recherche dans les forums
        const searchInputs = document.querySelectorAll('.search-container input');
        const searchButtons = document.querySelectorAll('.search-container button');
        
        for (let i = 0; i < searchInputs.length; i++) {
            const input = searchInputs[i];
            const button = searchButtons[i];
            
            if (input && button) {
                button.addEventListener('click', function() {
                    const searchValue = input.value.trim();
                    if (searchValue) {
                        // Simulation de recherche (à remplacer par un appel API réel)
                        console.log('Recherche dans les forums:', searchValue);
                        showNotification(`Recherche de "${searchValue}" en cours...`, 'info');
                    } else {
                        showNotification('Veuillez entrer un terme de recherche.', 'warning');
                    }
                });
                
                // Permettre la recherche avec la touche Entrée
                input.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') {
                        button.click();
                    }
                });
            }
        }
        
        // Soumission du formulaire pour nouveau sujet
        const newTopicForm = document.getElementById('newTopicForm');
        
        if (newTopicForm) {
            newTopicForm.addEventListener('submit', function(e) {
                e.preventDefault();
                
                // Récupérer les valeurs du formulaire
                const title = document.getElementById('topicTitle').value.trim();
                const category = document.getElementById('topicCategory').value;
                const message = document.getElementById('topicMessage').value.trim();
                const tags = document.getElementById('topicTags').value.trim();
                
                // Validation basique
                if (!title) {
                    showNotification('Veuillez entrer un titre pour votre sujet.', 'warning');
                    return;
                }
                
                if (!category) {
                    showNotification('Veuillez sélectionner une catégorie pour votre sujet.', 'warning');
                    return;
                }
                
                if (!message) {
                    showNotification('Veuillez entrer un message pour votre sujet.', 'warning');
                    return;
                }
                
                // Simuler l'envoi (à remplacer par un appel API réel)
                const submitButton = this.querySelector('button[type="submit"]');
                const originalText = submitButton.innerHTML;
                
                submitButton.disabled = true;
                submitButton.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Création en cours...';
                
                setTimeout(() => {
                    submitButton.disabled = false;
                    submitButton.innerHTML = originalText;
                    
                    // Réinitialiser le formulaire
                    this.reset();
                    
                    // Notification de succès
                    showNotification('Votre sujet a été créé avec succès !', 'success');
                    
                    // Dans un cas réel, vous redirigeriez vers le nouveau sujet
                    // window.location.href = '/student/forum/topic/123';
                }, 1500);
            });
        }
        
        // Éditeur de texte riche pour le message
        const richEditor = document.querySelector('.rich-editor');
        
        if (richEditor) {
            // Créer une barre d'outils simple
            const toolbar = document.createElement('div');
            toolbar.className = 'editor-toolbar mb-2';
            toolbar.innerHTML = `
                <button type="button" class="btn btn-sm btn-light mr-1" data-cmd="bold" title="Gras"><i class="fas fa-bold"></i></button>
                <button type="button" class="btn btn-sm btn-light mr-1" data-cmd="italic" title="Italique"><i class="fas fa-italic"></i></button>
                <button type="button" class="btn btn-sm btn-light mr-1" data-cmd="underline" title="Souligné"><i class="fas fa-underline"></i></button>
                <button type="button" class="btn btn-sm btn-light mr-1" data-cmd="insertUnorderedList" title="Liste à puces"><i class="fas fa-list-ul"></i></button><button type="button" class="btn btn-sm btn-light mr-1" data-cmd="insertOrderedList" title="Liste numérotée"><i class="fas fa-list-ol"></i></button>
                <button type="button" class="btn btn-sm btn-light mr-1" data-cmd="createLink" title="Insérer un lien"><i class="fas fa-link"></i></button>
                <button type="button" class="btn btn-sm btn-light mr-1" data-cmd="code" title="Code"><i class="fas fa-code"></i></button>
            `;
            
            // Insérer la barre d'outils avant l'éditeur
            richEditor.parentNode.insertBefore(toolbar, richEditor);
            
            // Ajouter les événements aux boutons
            const editorButtons = toolbar.querySelectorAll('button');
            
            editorButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const command = this.getAttribute('data-cmd');
                    
                    if (command === 'createLink') {
                        const url = prompt('Entrez l\'URL du lien:');
                        if (url) {
                            document.execCommand(command, false, url);
                        }
                    } else if (command === 'code') {
                        // Insérer des balises <code>
                        const selectedText = window.getSelection().toString();
                        if (selectedText) {
                            const codeText = '`' + selectedText + '`';
                            document.execCommand('insertText', false, codeText);
                        } else {
                            document.execCommand('insertText', false, '`` ');
                        }
                    } else {
                        document.execCommand(command, false, null);
                    }
                    
                    richEditor.focus();
                });
            });
        }
        
        // Animation des items du forum au survol
        const forumItems = document.querySelectorAll('.forum-item');
        
        forumItems.forEach(item => {
            item.addEventListener('mouseenter', function() {
                this.style.backgroundColor = '#f8f9fa';
            });
            
            item.addEventListener('mouseleave', function() {
                this.style.backgroundColor = '#fff';
            });
        });
        
        // Fonction pour afficher des notifications
        function showNotification(message, type = 'info') {
            // Créer l'élément de notification
            const notification = document.createElement('div');
            notification.className = `notification notification-${type}`;
            notification.innerHTML = `
                <div class="notification-icon">
                    <i class="fas ${type === 'info' ? 'fa-info-circle' : 
                                   type === 'success' ? 'fa-check-circle' : 
                                   type === 'warning' ? 'fa-exclamation-triangle' : 
                                   'fa-times-circle'}"></i>
                </div>
                <div class="notification-content">
                    <p>${message}</p>
                </div>
                <button class="close">
                    <i class="fas fa-times"></i>
                </button>
            `;
            
            // Créer ou récupérer le conteneur de notifications
            let notificationsContainer = document.querySelector('.notifications-container');
            
            if (!notificationsContainer) {
                notificationsContainer = document.createElement('div');
                notificationsContainer.className = 'notifications-container';
                document.body.appendChild(notificationsContainer);
            }
            
            // Ajouter la notification
            notificationsContainer.appendChild(notification);
            
            // Gestion du bouton de fermeture
            notification.querySelector('.close').addEventListener('click', function() {
                notification.classList.add('fade-out');
                setTimeout(() => {
                    notification.remove();
                    
                    // Nettoyer le conteneur s'il est vide
                    if (notificationsContainer.children.length === 0) {
                        notificationsContainer.remove();
                    }
                }, 300);
            });
            
            // Fermeture automatique après 3 secondes
            setTimeout(() => {
                if (document.body.contains(notification)) {
                    notification.classList.add('fade-out');
                    setTimeout(() => {
                        notification.remove();
                        
                        // Nettoyer le conteneur s'il est vide
                        if (notificationsContainer.children.length === 0) {
                            notificationsContainer.remove();
                        }
                    }, 300);
                }
            }, 3000);
        }
    });
</script>
{% endblock %}